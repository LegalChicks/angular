import{a as N}from"./chunk-IFXYSEVV.js";import"./chunk-2XNMIXXB.js";import{b as D,c as g,d as T,e as I,g as A,i as G,j,k as q,q as z,s as O}from"./chunk-3OKHU5GT.js";import{$a as S,Ha as k,Kb as V,Qa as m,Ra as d,T as y,Ua as C,Va as e,Wa as t,Xa as u,Y as h,Z as _,_ as P,ab as x,cb as p,fa as v,hb as M,jb as i,kb as E,lb as w,ua as a}from"./chunk-U6YQNLS5.js";function B(o,n){if(o&1){let l=S();e(0,"button",23),x("click",function(){h(l);let s=p();return _(s.toggleEdit())}),i(1," Edit Profile "),t()}}function H(o,n){if(o&1&&(e(0,"div",7),i(1),t()),o&2){let l=p();a(),w(" ",l.successMessage()," ")}}function U(o,n){o&1&&(e(0,"div",20)(1,"div",24),u(2,"input",25),e(3,"label",26),i(4," Public "),e(5,"span",27),i(6,"- Visible to all members in the directory."),t()()(),e(7,"div",24),u(8,"input",28),e(9,"label",29),i(10," Private "),e(11,"span",27),i(12,"- Hidden from the member directory."),t()()()())}function J(o,n){if(o&1&&(e(0,"div",21)(1,"span",30),i(2),t()()),o&2){let l,r,s,f,F,b=p();a(),M("bg-green-100",((l=b.user())==null?null:l.visibility)==="public")("text-green-800",((r=b.user())==null?null:r.visibility)==="public")("bg-red-100",((s=b.user())==null?null:s.visibility)==="private")("text-red-800",((f=b.user())==null?null:f.visibility)==="private"),a(),w(" ",((F=b.user())==null?null:F.visibility)==="public"?"Public":"Private"," ")}}function K(o,n){o&1&&(P(),e(0,"svg",33),u(1,"circle",34)(2,"path",35),t(),i(3," Saving... "))}function L(o,n){o&1&&i(0," Save Changes ")}function Q(o,n){if(o&1){let l=S();e(0,"div",22)(1,"button",31),x("click",function(){h(l);let s=p();return _(s.toggleEdit())}),i(2," Cancel "),t(),e(3,"button",32),m(4,K,4,0)(5,L,1,0),t()()}if(o&2){let l=p();a(3),C("disabled",l.profileForm.invalid||l.isSaving()),a(),d(l.isSaving()?4:5)}}var c=class c{constructor(){this.authService=y(N);this.fb=y(z);this.user=this.authService.currentUser;this.isEditing=v(!1);this.isSaving=v(!1);this.successMessage=v(null);this.profileForm=this.fb.group({name:["",g.required],email:["",[g.required,g.email]],visibility:["public",g.required]})}ngOnInit(){this.updateFormValues(),this.profileForm.disable()}updateFormValues(){let n=this.user();n&&this.profileForm.patchValue({name:n.name,email:n.email,visibility:n.visibility})}toggleEdit(){this.isEditing.update(n=>!n),this.isEditing()?this.profileForm.enable():(this.profileForm.disable(),this.updateFormValues()),this.successMessage.set(null)}async onSave(){if(!(this.profileForm.invalid||!this.user())){this.isSaving.set(!0),this.successMessage.set(null);try{await this.authService.updateProfile(this.user().id,{name:this.profileForm.value.name,email:this.profileForm.value.email,visibility:this.profileForm.value.visibility}),this.successMessage.set("Profile updated successfully!"),this.isEditing.set(!1),this.profileForm.disable()}catch(n){console.error("Failed to update profile",n)}finally{this.isSaving.set(!1)}}}};c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=k({type:c,selectors:[["app-profile"]],decls:37,vars:7,consts:[[1,"max-w-4xl","mx-auto"],[1,"bg-white","rounded-lg","shadow-md","overflow-hidden"],[1,"p-6","border-b"],[1,"flex","justify-between","items-center"],[1,"text-2xl","font-bold","text-gray-800"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-brand-purple","rounded-md","hover:bg-brand-purple-dark","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-brand-purple-dark"],[1,"p-6"],["role","alert",1,"p-4","mb-6","text-sm","text-green-700","bg-green-100","rounded-lg"],[3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","gap-6","sm:grid-cols-2"],["for","name",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","name","formControlName","name",1,"mt-1","block","w-full","px-3","py-2","bg-white","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-brand-purple","focus:border-brand-purple","sm:text-sm","disabled:bg-gray-100"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","formControlName","email",1,"mt-1","block","w-full","px-3","py-2","bg-white","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-brand-purple","focus:border-brand-purple","sm:text-sm","disabled:bg-gray-100"],[1,"block","text-sm","font-medium","text-gray-700"],[1,"mt-2","text-gray-800","font-semibold","capitalize"],[1,"mt-2","text-gray-500","font-mono","text-sm"],[1,"mt-6","pt-6","border-t"],[1,"text-lg","font-medium","leading-6","text-gray-900"],[1,"mt-1","text-sm","text-gray-600"],[1,"mt-4","space-y-4"],[1,"mt-4"],[1,"flex","justify-end","mt-8","space-x-4"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-brand-purple","rounded-md","hover:bg-brand-purple-dark","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-brand-purple-dark",3,"click"],[1,"flex","items-center"],["id","visibility-public","name","visibility","type","radio","value","public","formControlName","visibility",1,"focus:ring-brand-purple","h-4","w-4","text-brand-purple","border-gray-300"],["for","visibility-public",1,"ml-3","block","text-sm","font-medium","text-gray-700"],[1,"text-gray-500","font-normal"],["id","visibility-private","name","visibility","type","radio","value","private","formControlName","visibility",1,"focus:ring-brand-purple","h-4","w-4","text-brand-purple","border-gray-300"],["for","visibility-private",1,"ml-3","block","text-sm","font-medium","text-gray-700"],[1,"px-3","py-1","text-sm","font-semibold","rounded-full"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-gray-200","rounded-md","hover:bg-gray-300","focus:outline-none",3,"click"],["type","submit",1,"px-6","py-2","text-sm","font-medium","text-white","bg-brand-gold","rounded-md","hover:bg-brand-gold-light","focus:outline-none","disabled:bg-gray-400","disabled:cursor-not-allowed",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-white","inline-block"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(l,r){if(l&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),i(5,"My Profile"),t(),m(6,B,2,0,"button",5),t()(),e(7,"div",6),m(8,H,2,1,"div",7),e(9,"form",8),x("ngSubmit",function(){return r.onSave()}),e(10,"div",9)(11,"div")(12,"label",10),i(13,"Full Name"),t(),u(14,"input",11),t(),e(15,"div")(16,"label",12),i(17,"Email Address"),t(),u(18,"input",13),t(),e(19,"div")(20,"label",14),i(21,"Member Role"),t(),e(22,"p",15),i(23),t()(),e(24,"div")(25,"label",14),i(26,"Member ID"),t(),e(27,"p",16),i(28),t()()(),e(29,"div",17)(30,"h3",18),i(31,"Profile Visibility"),t(),e(32,"p",19),i(33,"Choose who can see your profile in the member directory."),t(),m(34,U,13,0,"div",20)(35,J,3,9,"div",21),t(),m(36,Q,6,2,"div",22),t()()()()),l&2){let s,f;a(6),d(r.isEditing()?-1:6),a(2),d(r.successMessage()?8:-1),a(),C("formGroup",r.profileForm),a(14),E((s=r.user())==null?null:s.role),a(5),E((f=r.user())==null?null:f.id),a(6),d(r.isEditing()?34:35),a(2),d(r.isEditing()?36:-1)}},dependencies:[V,O,A,D,G,T,I,j,q],encapsulation:2,changeDetection:0});var R=c;export{R as ProfileComponent};
