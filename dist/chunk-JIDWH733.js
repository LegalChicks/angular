import{b as G,c as _,d as X,e as z,g as J,h as U,j as Y,k as K,l as Q,m as W,n as Z,q as ee,s as te}from"./chunk-3OKHU5GT.js";import{$ as L,$a as O,B as v,C as f,Ha as H,Jb as $,Kb as q,O as V,Qa as y,Ra as h,Sa as C,T as P,Ta as w,Ua as I,Va as e,Wa as t,Xa as p,Y as F,Z as M,_ as A,a as B,ab as E,cb as m,fa as d,gb as N,hb as D,ib as R,jb as n,kb as l,l as g,lb as k,sb as u,tb as x,ua as s,xb as j}from"./chunk-U6YQNLS5.js";var c=class c{constructor(){this.mockInvoices=d([{id:"INV-001",clientName:"Cagayan Valley Hotel",amount:12500,status:"Paid",dueDate:"2024-06-30",issuedDate:"2024-06-15"},{id:"INV-002",clientName:"Tuguegarao Grand Restaurant",amount:8200,status:"Pending",dueDate:"2024-07-15",issuedDate:"2024-07-01"},{id:"INV-003",clientName:"Isabela Local Market Coop",amount:15300,status:"Pending",dueDate:"2024-07-20",issuedDate:"2024-07-05"},{id:"INV-004",clientName:"Local Bake Shop",amount:4500,status:"Overdue",dueDate:"2024-06-25",issuedDate:"2024-06-10"}]);this.mockExpenses=d([{id:"EXP-001",date:"2024-07-01",category:"Feeds",description:"50 bags of grower pellets",amount:87500},{id:"EXP-002",date:"2024-07-03",category:"Vitamins",description:"Immunity boosters pack",amount:3e3},{id:"EXP-003",date:"2024-06-28",category:"Utilities",description:"Electricity bill for June",amount:4200},{id:"EXP-004",date:"2024-06-25",category:"Equipment",description:"New automatic drinkers (5 units)",amount:1250}])}getInvoices(){return g(this.mockInvoices()).pipe(v(500))}getExpenses(){return g(this.mockExpenses()).pipe(v(500))}addExpense(a){let i=B({id:`EXP-00${this.mockExpenses().length+1}`,date:new Date().toISOString().split("T")[0]},a);return this.mockExpenses.update(o=>[i,...o]),g(i).pipe(v(300))}getProfitabilityData(){return g({totalRevenue:350500,totalExpenses:210250,netProfit:140250,revenueVsExpenses:[{month:"Jan",revenue:75e3,expenses:5e4},{month:"Feb",revenue:82e3,expenses:55e3},{month:"Mar",revenue:95e3,expenses:6e4},{month:"Apr",revenue:88e3,expenses:58e3},{month:"May",revenue:105e3,expenses:62e3},{month:"Jun",revenue:112e3,expenses:68e3}]}).pipe(v(800))}};c.\u0275fac=function(i){return new(i||c)},c.\u0275prov=V({token:c,factory:c.\u0275fac,providedIn:"root"});var T=c;var oe=(r,a)=>a.month,ne=(r,a)=>a.id;function re(r,a){r&1&&(e(0,"div",7)(1,"div",8),A(),e(2,"svg",9),p(3,"circle",10)(4,"path",11),t(),L(),e(5,"p",12),n(6,"Loading Financial Data..."),t()()())}function se(r,a){if(r&1&&(e(0,"div",23)(1,"div",28),p(2,"div",29)(3,"div",30),t(),e(4,"span",31),n(5),t()()),r&2){let i=a.$implicit,o=m(4);s(2),N("height",o.getBarHeight(i.revenue)),s(),N("height",o.getBarHeight(i.expenses)),s(2),l(i.month)}}function le(r,a){if(r&1&&(e(0,"div",15)(1,"div",16)(2,"div",13)(3,"p",17),n(4,"Total Revenue"),t(),e(5,"p",18),n(6),u(7,"currency"),t()(),e(8,"div",13)(9,"p",17),n(10,"Total Expenses"),t(),e(11,"p",19),n(12),u(13,"currency"),t()(),e(14,"div",13)(15,"p",17),n(16,"Net Profit"),t(),e(17,"p",20),n(18),u(19,"currency"),t()()(),e(20,"div",13)(21,"h2",21),n(22,"Revenue vs. Expenses"),t(),e(23,"div",22),C(24,se,6,5,"div",23,oe),t(),e(26,"div",24)(27,"div",25),p(28,"span",26),n(29,"Revenue"),t(),e(30,"div",25),p(31,"span",27),n(32,"Expenses"),t()()()()),r&2){let i=a;s(6),l(x(7,3,i.totalRevenue,"PHP","symbol","1.2-2")),s(6),l(x(13,8,i.totalExpenses,"PHP","symbol","1.2-2")),s(6),l(x(19,13,i.netProfit,"PHP","symbol","1.2-2")),s(6),w(i.revenueVsExpenses)}}function de(r,a){if(r&1&&y(0,le,33,18,"div",15),r&2){let i,o=m(2);h((i=o.profitabilityData())?0:-1,i)}}function me(r,a){if(r&1&&(e(0,"tr")(1,"td",39),n(2),t(),e(3,"td",40),n(4),t(),e(5,"td",40),n(6),u(7,"currency"),t(),e(8,"td",40)(9,"span",41),n(10),t()(),e(11,"td",40),n(12),t()()),r&2){let i=a.$implicit,o=m(3);s(2),l(i.id),s(2),l(i.clientName),s(2),l(x(7,7,i.amount,"PHP","symbol","1.2-2")),s(3),R(o.getStatusClass(i.status)),s(),k(" ",i.status," "),s(2),l(i.dueDate)}}function pe(r,a){if(r&1&&(e(0,"div",13)(1,"h2",21),n(2,"Sales Invoices"),t(),e(3,"div",32)(4,"div",33)(5,"div",34)(6,"table",35)(7,"thead")(8,"tr")(9,"th",36),n(10,"Invoice ID"),t(),e(11,"th",37),n(12,"Client"),t(),e(13,"th",37),n(14,"Amount"),t(),e(15,"th",37),n(16,"Status"),t(),e(17,"th",37),n(18,"Due Date"),t()()(),e(19,"tbody",38),C(20,me,13,12,"tr",null,ne),t()()()()()()),r&2){let i=m(2);s(20),w(i.invoices())}}function ce(r,a){if(r&1&&(e(0,"tr")(1,"td",52),n(2),t(),e(3,"td",40),n(4),t(),e(5,"td",40),n(6),t(),e(7,"td",53),n(8),u(9,"currency"),t()()),r&2){let i=a.$implicit;s(2),l(i.date),s(2),l(i.category),s(2),l(i.description),s(2),k("-",x(9,4,i.amount,"PHP","symbol","1.2-2"))}}function ue(r,a){r&1&&n(0," Saving... ")}function xe(r,a){r&1&&n(0," Add Expense ")}function be(r,a){if(r&1){let i=O();e(0,"div",14)(1,"div",42)(2,"h2",21),n(3,"Recent Expenses"),t(),e(4,"div",32)(5,"div",33)(6,"div",34)(7,"table",35)(8,"thead")(9,"tr")(10,"th",36),n(11,"Date"),t(),e(12,"th",37),n(13,"Category"),t(),e(14,"th",37),n(15,"Description"),t(),e(16,"th",37),n(17,"Amount"),t()()(),e(18,"tbody",43),C(19,ce,10,9,"tr",null,ne),t()()()()()(),e(21,"div",13)(22,"h2",21),n(23,"Add New Expense"),t(),e(24,"form",44),E("ngSubmit",function(){F(i);let S=m(2);return M(S.addExpense())}),e(25,"div")(26,"label",45),n(27,"Description"),t(),p(28,"input",46),t(),e(29,"div")(30,"label",47),n(31,"Amount (PHP)"),t(),p(32,"input",48),t(),e(33,"div")(34,"label",49),n(35,"Category"),t(),e(36,"select",50)(37,"option"),n(38,"Feeds"),t(),e(39,"option"),n(40,"Vitamins"),t(),e(41,"option"),n(42,"Equipment"),t(),e(43,"option"),n(44,"Utilities"),t(),e(45,"option"),n(46,"Other"),t()()(),e(47,"button",51),y(48,ue,1,0)(49,xe,1,0),t()()()()}if(r&2){let i=m(2);s(19),w(i.expenses()),s(5),I("formGroup",i.expenseForm),s(23),I("disabled",i.expenseForm.invalid||i.isAddingExpense()),s(),h(i.isAddingExpense()?48:49)}}function ge(r,a){if(r&1&&y(0,de,1,1)(1,pe,22,0,"div",13)(2,be,50,3,"div",14),r&2){let i,o=m();h((i=o.activeTab())==="profitability"?0:i==="invoices"?1:i==="expenses"?2:-1)}}var b=class b{constructor(){this.businessService=P(T);this.fb=P(ee);this.activeTab=d("profitability");this.isLoading=d(!0);this.profitabilityData=d(null);this.invoices=d([]);this.expenses=d([]);this.isAddingExpense=d(!1);this.expenseForm=this.fb.group({description:["",_.required],amount:[null,[_.required,_.min(.01)]],category:["Feeds",_.required]});this.maxChartValue=j(()=>{let a=this.profitabilityData();if(!a)return 0;let i=a.revenueVsExpenses.flatMap(o=>[o.revenue,o.expenses]);return Math.max(...i)})}ngOnInit(){this.loadProfitabilityData()}changeTab(a){this.activeTab.set(a),a==="profitability"&&!this.profitabilityData()&&this.loadProfitabilityData(),a==="invoices"&&this.invoices().length===0&&this.loadInvoices(),a==="expenses"&&this.expenses().length===0&&this.loadExpenses()}loadProfitabilityData(){this.isLoading.set(!0),this.businessService.getProfitabilityData().pipe(f(()=>this.isLoading.set(!1))).subscribe(a=>this.profitabilityData.set(a))}loadInvoices(){this.isLoading.set(!0),this.businessService.getInvoices().pipe(f(()=>this.isLoading.set(!1))).subscribe(a=>this.invoices.set(a))}loadExpenses(){this.isLoading.set(!0),this.businessService.getExpenses().pipe(f(()=>this.isLoading.set(!1))).subscribe(a=>this.expenses.set(a))}async addExpense(){if(this.expenseForm.invalid)return;this.isAddingExpense.set(!0);let a={description:this.expenseForm.value.description,amount:this.expenseForm.value.amount,category:this.expenseForm.value.category};this.businessService.addExpense(a).pipe(f(()=>this.isAddingExpense.set(!1))).subscribe(i=>{this.expenses.update(o=>[i,...o]),this.expenseForm.reset({category:"Feeds"})})}getBarHeight(a){let i=this.maxChartValue();return i===0?"0%":`${a/i*100}%`}getStatusClass(a){switch(a){case"Paid":return"bg-green-100 text-green-800";case"Pending":return"bg-yellow-100 text-yellow-800";case"Overdue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}};b.\u0275fac=function(i){return new(i||b)},b.\u0275cmp=H({type:b,selectors:[["app-business-suite"]],decls:17,vars:31,consts:[[1,"space-y-6"],[1,"text-3xl","font-bold","text-gray-800"],[1,"mt-1","text-gray-600"],[1,"border-b","border-gray-200"],["aria-label","Tabs",1,"-mb-px","flex","space-x-6"],[1,"whitespace-nowrap","py-4","px-1","border-b-2","font-medium","text-sm",3,"click"],[1,"mt-6"],[1,"flex","justify-center","items-center","p-16","bg-white","rounded-lg","shadow-md"],[1,"text-center","text-gray-500"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","mx-auto","h-8","w-8","text-brand-purple"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"mt-4","text-lg"],[1,"p-6","bg-white","rounded-lg","shadow-md"],[1,"grid","grid-cols-1","gap-8","lg:grid-cols-3"],[1,"space-y-8"],[1,"grid","grid-cols-1","gap-6","sm:grid-cols-3"],[1,"text-sm","font-medium","text-gray-500"],[1,"mt-1","text-3xl","font-bold","text-green-600"],[1,"mt-1","text-3xl","font-bold","text-red-600"],[1,"mt-1","text-3xl","font-bold","text-brand-purple"],[1,"text-xl","font-bold","text-gray-800"],[1,"mt-6","h-72","flex","items-end","justify-between","space-x-4"],[1,"flex-1","flex","flex-col","items-center"],[1,"flex","justify-center","mt-4","space-x-4","text-sm"],[1,"flex","items-center"],[1,"w-3","h-3","mr-2","bg-green-300","rounded-sm"],[1,"w-3","h-3","mr-2","bg-red-300","rounded-sm"],[1,"w-full","h-full","flex","items-end","justify-center","space-x-1"],[1,"w-1/2","bg-green-300","rounded-t-md","hover:bg-green-400"],[1,"w-1/2","bg-red-300","rounded-t-md","hover:bg-red-400"],[1,"mt-2","text-xs","font-medium","text-gray-600"],[1,"mt-4","flow-root"],[1,"-mx-4","-my-2","overflow-x-auto","sm:-mx-6","lg:-mx-8"],[1,"inline-block","min-w-full","py-2","align-middle","sm:px-6","lg:px-8"],[1,"min-w-full","divide-y","divide-gray-300"],["scope","col",1,"py-3.5","pl-4","pr-3","text-left","text-sm","font-semibold","text-gray-900","sm:pl-0"],["scope","col",1,"px-3","py-3.5","text-left","text-sm","font-semibold","text-gray-900"],[1,"divide-y","divide-gray-200"],[1,"whitespace-nowrap","py-4","pl-4","pr-3","text-sm","font-medium","text-gray-900","sm:pl-0"],[1,"whitespace-nowrap","px-3","py-4","text-sm","text-gray-500"],[1,"px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full"],[1,"lg:col-span-2","p-6","bg-white","rounded-lg","shadow-md"],[1,"divide-y","divide-gray-200","bg-white"],[1,"mt-4","space-y-4",3,"ngSubmit","formGroup"],["for","description",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","description","formControlName","description",1,"mt-1","block","w-full","px-3","py-2","bg-white","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-brand-purple","focus:border-brand-purple","sm:text-sm"],["for","amount",1,"block","text-sm","font-medium","text-gray-700"],["type","number","id","amount","formControlName","amount",1,"mt-1","block","w-full","px-3","py-2","bg-white","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-brand-purple","focus:border-brand-purple","sm:text-sm"],["for","category",1,"block","text-sm","font-medium","text-gray-700"],["id","category","formControlName","category",1,"mt-1","block","w-full","px-3","py-2","bg-white","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-brand-purple","focus:border-brand-purple","sm:text-sm"],["type","submit",1,"w-full","flex","justify-center","py-2","px-4","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-brand-purple","hover:bg-brand-purple-dark","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-brand-purple-dark","disabled:bg-gray-400",3,"disabled"],[1,"whitespace-nowrap","py-4","pl-4","pr-3","text-sm","text-gray-500","sm:pl-0"],[1,"whitespace-nowrap","px-3","py-4","text-sm","font-medium","text-red-600"]],template:function(i,o){i&1&&(e(0,"div",0)(1,"div")(2,"h1",1),n(3,"Your Business Suite"),t(),e(4,"p",2),n(5," Manage your farm's finances, track sales, and monitor profitability all in one place. "),t()(),e(6,"div",3)(7,"nav",4)(8,"button",5),E("click",function(){return o.changeTab("profitability")}),n(9," Profitability "),t(),e(10,"button",5),E("click",function(){return o.changeTab("invoices")}),n(11," Invoices "),t(),e(12,"button",5),E("click",function(){return o.changeTab("expenses")}),n(13," Expenses "),t()()(),e(14,"div",6),y(15,re,7,0,"div",7)(16,ge,3,1),t()()),i&2&&(s(8),D("border-brand-purple",o.activeTab()==="profitability")("text-brand-purple",o.activeTab()==="profitability")("text-gray-500",o.activeTab()!=="profitability")("hover:text-gray-700",o.activeTab()!=="profitability")("hover:border-gray-300",o.activeTab()!=="profitability"),s(2),D("border-brand-purple",o.activeTab()==="invoices")("text-brand-purple",o.activeTab()==="invoices")("text-gray-500",o.activeTab()!=="invoices")("hover:text-gray-700",o.activeTab()!=="invoices")("hover:border-gray-300",o.activeTab()!=="invoices"),s(2),D("border-brand-purple",o.activeTab()==="expenses")("text-brand-purple",o.activeTab()==="expenses")("text-gray-500",o.activeTab()!=="expenses")("hover:text-gray-700",o.activeTab()!=="expenses")("hover:border-gray-300",o.activeTab()!=="expenses"),s(3),h(o.isLoading()?15:16))},dependencies:[q,te,J,W,Z,G,U,Q,X,z,Y,K,$],encapsulation:2,changeDetection:0});var ie=b;export{ie as BusinessSuiteComponent};
