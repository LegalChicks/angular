<div class="space-y-6">
  <div class="flex items-center justify-between">
    <div>
      <h1 class="text-3xl font-bold text-gray-800 dark:text-gray-200">Member Directory</h1>
      <p class="mt-1 text-gray-600 dark:text-gray-400">
        Find and connect with other members of the network.
        @if (!isLoading() && filteredMembers().length > 0) {
          <span class="text-brand-purple font-semibold">({{ filteredMembers().length }} {{ filteredMembers().length === 1 ? 'member' : 'members' }} found)</span>
        }
      </p>
    </div>
    <button 
      (click)="refreshMembers()" 
      [disabled]="isLoading()"
      class="px-4 py-2 text-sm font-medium text-white bg-brand-purple rounded-md hover:bg-brand-purple-dark disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2">
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" [class.animate-spin]="isLoading()">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
      </svg>
      Refresh
    </button>
  </div>

  <!-- Search Bar -->
  <div class="relative">
    <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
      <svg class="w-5 h-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
      </svg>
    </div>
    <input
      type="text"
      placeholder="Search by name or email..."
      class="block w-full py-3 pl-10 pr-4 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-brand-purple focus:border-brand-purple"
      [ngModel]="searchTerm()"
      (ngModelChange)="searchTerm.set($event)">
  </div>
  
  @if (isLoading()) {
    <div class="text-center py-10">
      <p class="text-gray-500 dark:text-gray-400">Loading members...</p>
    </div>
  } @else {
    @if (filteredMembers().length > 0) {
      <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
        @for (member of filteredMembers(); track member.id) {
          <div class="flex flex-col items-center p-6 text-center bg-white dark:bg-gray-800 rounded-lg shadow-md transition-shadow hover:shadow-lg">
            <img class="w-24 h-24 mb-4 rounded-full object-cover" [src]="'https://i.pravatar.cc/150?u=' + member.id" alt="Profile picture of {{member.name}}">
            <h3 class="text-lg font-semibold text-brand-purple">{{ member.name }}</h3>
            <p class="text-sm text-gray-500 dark:text-gray-400">{{ member.email }}</p>
          </div>
        }
      </div>
    } @else {
      <div class="text-center py-10 bg-white dark:bg-gray-800 rounded-lg shadow-md">
        <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-300">No Members Found</h3>
        <p class="mt-1 text-gray-500 dark:text-gray-400">
           @if (searchTerm()) {
             Your search for "{{ searchTerm() }}" did not match any public member profiles.
           } @else {
             There are no public member profiles to display at this time.
           }
        </p>
      </div>
    }
  }
</div>
